<?php
	function boukensha(){
		$mod = array(0,0,0,0,0,0,0);
		return $mod;
	}
	function heishi(){
		$mod = array(3,1,-2,-1,-1,0,0);
		return $mod;
	}
	function mahoutsukai(){
		$mod = array(-5,0,3,0,0,0,1);
		return $mod;
	}
	function senshi(){
		$mod = array(5,4,0,0,1,2,0);
		return $mod;
	}
	function kishi(){
		$mod = array(4,5,0,0,0,2,1);
		return $mod;
	}
	function shagekisyu(){
		$mod = array(3,2,1,1,3,3,2);
		return $mod;
	}
	function touzoku(){
		$mod = array(2,1,0,0,5,2,1);
		return $mod;
	}
	function souryo(){
		$mod = array(0,1,4,4,1,1,4);
		return $mod;
	}
	function madoushi(){
		$mod = array(0,0,6,2,0,2,0);
		return $mod;
	}
	function kakutouka(){
		$mod = array(3,3,0,0,3,2,0);
		return $mod;
	}
	function ryuumyakushi(){
		$mod = array(3,2,3,1,2,1,4);
		return $mod;
	}
	function tabigeininn(){
		$mod = array(2,1,1,0,3,2,2);
		return $mod;
	}
	function shoukanshi(){
		$mod = array(0,0,4,4,0,1,1);
		return $mod;
	}
	function kurokishi(){
		$mod = array(5,4,3,3,3,3,0);
		return $mod;
	}
	function kyousenshi(){
		$mod = array(7,6,0,0,3,3,0);
		return $mod;
	}
	function mahoukenshi(){
		$mod = array(4,3,6,2,2,4,4);
		return $mod;
	}
	function ansatsusha(){
		$mod = array(0,0,0,1,5,5,0);
		return $mod;
	}
	function juushi(){
		$mod = array(0,4,2,3,1,4,4);
		return $mod;
	}
	function ginyuushijinn(){
		$mod = array(3,2,2,2,4,3,6);
		return $mod;
	}
	function shinoshouninn(){
		$mod = array(2,2,2,4,2,2,3);
		return $mod;
	}
	function majutsushi(){
		$mod = array(0,0,8,3,3,4,0);
		return $mod;
	}
	function shinkann(){
		$mod = array(0,2,6,6,1,2,6);
		return $mod;
	}
	function seireitsukai(){
		$mod = array(0,0,7,5,3,2,2);
		return $mod;
	}
	function samurai(){
		$mod = array(6,5,0,1,3,3,0);
		return $mod;
	}
	function shugokishi(){
		$mod = array(5,6,0,1,0,3,1);
		return $mod;
	}
	function artemis(){
		$mod = array(3,3,2,2,4,3,4);
		return $mod;
	}
	function valkyrie(){
		$mod = array(4,5,1,1,3,4,3);
		return $mod;
	}
	function capBoukensha(){
		$cap = array(24,24,19,21,26,26,24);
		return $cap;
	}
	function capHeishi(){
		$cap = array(26,26,16,21,24,24,24);
		return $cap;
	}
	function capMahoutsukai(){
		$cap = array(14,16,26,24,24,24,24);
		return $cap;
	}
	function capSenshi(){
		$cap = array(29,26,19,24,27,27,27);
		return $cap;
	}
	function capKishi(){
		$cap = array(28,29,19,24,26,27,26);
		return $cap;
	}
	function capShagekisyu(){
		$cap = array(26,24,21,24,30,28,27);
		return $cap;
	}
	function capTouzoku(){
		$cap = array(25,24,21,25,30,30,29);
		return $cap;
	}
	function capSouryo(){
		$cap = array(22,24,28,29,24,24,28);
		return $cap;
	}
	function capMadoushi(){
		$cap = array(18,22,31,26,26,26,26);
		return $cap;
	}
	function capKakutouka(){
		$cap = array(28,27,19,24,27,27,27);
		return $cap;
	}
	function capRyuumyakushi(){
		$cap = array(27,27,24,27,27,27,29);
		return $cap;
	}
	function capTabigeininn(){
		$cap = array(26,26,22,26,25,26,26);
		return $cap;
	}
	function capShoukanshi(){
		$cap = array(21,24,30,27,27,26,26);
		return $cap;
	}
	function capKurokishi(){
		$cap = array(33,31,27,31,31,32,29);
		return $cap;
	}
	function capKyousenshi(){
		$cap = array(36,32,20,24,29,31,31);
		return $cap;
	}
	function capMahoukenshi(){
		$cap = array(31,30,33,30,32,32,30);
		return $cap;
	}
	function capAnsatsusha(){
		$cap = array(26,26,22,26,36,36,31);
		return $cap;
	}
	function capJuushi(){
		$cap = array(29,31,29,31,29,32,33);
		return $cap;
	}
	function capGinyuushijinn(){
		$cap = array(29,29,29,29,31,30,36);
		return $cap;
	}
	function capShinoshouninn(){
		$cap = array(29,29,29,36,29,29,29);
		return $cap;
	}
	function capMajutsushi(){
		$cap = array(21,23,36,31,31,32,31);
		return $cap;
	}
	function capShinkann(){
		$cap = array(24,26,32,32,29,30,26);
		return $cap;
	}
	function capSeireitsukai(){
		$cap = array(21,24,34,31,30,31,32);
		return $cap;
	}
	function capSamurai(){
		$cap = array(33,31,23,27,32,33,28);
		return $cap;
	}
	function capShugokishi(){
		$cap = array(32,36,22,26,29,31,31);
		return $cap;
	}
	function capArtemis(){
		$cap = array(29,29,25,27,35,34,34);
		return $cap;
	}
	function capValkyrie(){
		$cap = array(31,31,23,26,34,34,31);
		return $cap;
	}

	if(isset($_POST['wanryoku'])&&is_numeric($_POST['wanryoku'])){$base[0]=$_POST['wanryoku'];}
	if(isset($_POST['seimei'])&&is_numeric($_POST['seimei'])){$base[1]=$_POST['seimei'];}
	if(isset($_POST['maryoku'])&&is_numeric($_POST['maryoku'])){$base[2]=$_POST['maryoku'];}
	if(isset($_POST['seishin'])&&is_numeric($_POST['seishin'])){$base[3]=$_POST['seishin'];}
	if(isset($_POST['binshou'])&&is_numeric($_POST['binshou'])){$base[4]=$_POST['binshou'];}
	if(isset($_POST['giryou'])&&is_numeric($_POST['giryou'])){$base[5]=$_POST['giryou'];}
	if(isset($_POST['unn'])&&is_numeric($_POST['unn'])){$base[6]=$_POST['unn'];}


	if(isset($_POST['jobBefore'])&&isset($_POST['jobAfter'])){
		switch($_POST['jobBefore']){

			case 'boukensha':
			$modBefore = boukensha();
			break;

			case 'heishi':
			$modBefore = heishi();
			break;

			case 'mahoutsukai':
			$modBefore = mahoutsukai();
			break;

			case 'senshi':
			$modBefore = senshi();
			break;
			
			case 'kishi':
			$modBefore = kishi();
			break;

			case 'shagekisyu':
			$modBefore = shagekisyu();
			break;

			case 'touzoku':
			$modBefore = touzoku();
			break;

			case 'souryo':
			$modBefore = souryo();
			break;

			case 'madoushi':
			$modBefore = madoushi();
			break;

			case 'kakutouka':
			$modBefore = kakutouka();
			break;

			case 'ryuumyakushi':
			$modBefore = ryuumyakushi();
			break;

			case 'tabigeininn':
			$modBefore = tabigeininn();
			break;

			case 'shoukanshi':
			$modBefore = shoukanshi();
			break;

			case 'kurokishi':
			$modBefore = kurokishi();
			break;

			case 'kyousenshi':
			$modBefore = kyousenshi();
			break;

			case 'mahoukenshi':
			$modBefore = mahoukenshi();
			break;

			case 'ansatsusha':
			$modBefore = ansatsusha();
			break;

			case 'juushi':
			$modBefore = juushi();
			break;

			case 'ginyuushijinn':
			$modBefore = ginyuushijinn();
			break;

			case 'shinoshouninn':
			$modBefore = shinoshouninn();
			break;

			case 'majutsushi':
			$modBefore = majutsushi();
			break;

			case 'shinkann':
			$modBefore = shinkann();
			break;
			
			case 'seireitsukai':
			$modBefore = seireitsukai();
			break;

			case 'samurai':
			$modBefore = samurai();
			break;

			case 'shugokishi':
			$modBefore = shugokishi();
			break;

			case 'artemis':
			$modBefore = artemis();
			break;

			case 'valkyrie':
			$modBefore = valkyrie();
			break;

		}

			switch($_POST['jobAfter']){

				case 'boukensha':
				$modAfter = boukensha();
				$cap = capBoukensha();
				$capName = "冒険者";
				break;

				case 'heishi':
				$modAfter = heishi();
				$cap = capHeishi();
				$capName = "兵士";
				break;

				case 'mahoutsukai':
				$modAfter = mahoutsukai();
				$cap = capMahoutsukai();
				$capName = "魔法使い";
				break;

				case 'senshi':
				$modAfter = senshi();
				$cap = capSenshi();
				$capName = "戦士";
				break;

				case 'kishi':
				$modAfter = kishi();
				$cap = capKishi();
				$capName = "騎士";
				break;

				case 'shagekisyu':
				$modAfter = shagekisyu();
				$cap = capShagekisyu();
				$capName = "射撃手";
				break;

				case 'touzoku':
				$modAfter = touzoku();
				$cap = capTouzoku();
				$capName = "盗賊";
				break;

				case 'souryo':
				$modAfter = souryo();
				$cap = capSouryo();
				$capName = "僧侶";
				break;

				case 'madoushi':
				$modAfter = madoushi();
				$cap = capMadoushi();
				$capName = "魔道士";
				break;

				case 'kakutouka':
				$modAfter = kakutouka();
				$cap = capKakutouka();
				$capName = "格闘家";
				break;

				case 'ryuumyakushi':
				$modAfter = ryuumyakushi();
				$cap = capRyuumyakushi();
				$capName = "龍脈士";
				break;

				case 'tabigeininn':
				$modAfter = tabigeininn();
				$cap = capTabigeininn();
				$capName = "旅芸人";
				break;

				case 'shoukanshi':
				$modAfter = shoukanshi();
				$cap = capShoukanshi();
				$capName = "召喚士";
				break;

				case 'kurokishi':
				$modAfter = kurokishi();
				$cap = capKurokishi();
				$capName = "黒騎士";
				break;

				case 'kyousenshi':
				$modAfter = kyousenshi();
				$cap = capKyousenshi();
				$capName = "狂戦士";
				break;

				case 'mahoukenshi':
				$modAfter = mahoukenshi();
				$cap = capMahoukenshi();
				$capName = "魔法剣士";
				break;

				case 'ansatsusha':
				$modAfter = ansatsusha();
				$cap = capAnsatsusha();
				$capName = "暗殺者";
				break;

				case 'juushi':
				$modAfter = juushi();
				$cap = capJuushi();
				$capName = "銃士";
				break;

				case 'ginyuushijinn':
				$modAfter = ginyuushijinn();
				$cap = capGinyuushijinn();
				$capName = "吟遊詩人";
				break;

				case 'shinoshouninn':
				$modAfter = shinoshouninn();
				$cap = capShinoshouninn();
				$capName = "死の商人";
				break;

				case 'majutsushi':
				$modAfter = majutsushi();
				$cap = capMajutsushi();
				$capName = "魔術師";
				break;

				case 'shinkann':
				$modAfter = shinkann();
				$cap = capShinkann();
				$capName = "神官";
				break;

				case 'seireitsukai':
				$modAfter = seireitsukai();
				$cap = capSeireitsukai();
				$capName = "精霊使い";
				break;

				case 'samurai':
				$modAfter = samurai();
				$cap = capSamurai();
				$capName = "侍";
				break;

				case 'shugokishi':
				$modAfter = shugokishi();
				$cap = capShugokishi();
				$capName = "守護騎士";
				break;

				case 'artemis':
				$modAfter = artemis();
				$cap = capArtemis();
				$capName = "アルテミス";
				break;

				case 'valkyrie':
				$modAfter = valkyrie();
				$cap = capValkyrie();
				$capName = "ヴァルキリー";
				break;
		}


		for($j=0; $j<=6; $j++){
				$relay[$j]=$base[$j]-$modBefore[$j];
				$result[$j]=$relay[$j]+$modAfter[$j];
				$change[$j]=$result[$j]-$base[$j];
				if($change[$j]>=0){
					$changeChars[$j] = "+".$change[$j];
				}else{
					$changeChars[$j] = $change[$j];
				}
				$difference[$j]=$result[$j]-$cap[$j];
				if($difference[$j]>=0){
					$differenceChars[$j] = "+".$difference[$j];
				}else{
					$differenceChars[$j] = $difference[$j];
				}
		}
	}

	if(isset($result)){

		$capResult = $result;
		for($i=0; $i<=6; $i++){
			if($result[$i]<0){
				$capResult[$i] = 0;
				echo('<script>
					$(function(){
						$("#'.$i.'").attr("title","真値:'.$result[$i].'");
					});
				</script>');
			}
			if($cap[$i]<=$result[$i]){
				$capResult[$i] = $cap[$i].'!';
				echo('<script>
					$(function(){
						$("#'.$i.'").attr("title","真値:'.$result[$i].'");
					});
				</script>');
			}
		}


		for($j=0; $j<=6; $j++){
			$i=$j+3;
			echo('<td class="col'.$i.'"><span class="result" id="'.$j.'">'.htmlspecialchars($capResult[$j],ENT_QUOTES,"UTF-8").'</span></td>');
		}
			echo('</tr>');



	

	echo('<tr class="row4"><td colspan="2">ステータス変化</td>');
		for($j=0; $j<=6; $j++){
			echo('<td>'.$changeChars[$j].'</td>');
		}
	echo('</tr>');


	echo('<tr class="row5"><td id="capName" colspan="2">'.$capName.'のステータスキャップ</td>');
		for($j=0; $j<=6; $j++){
			echo('<td>'.$cap[$j].'('.$differenceChars[$j].')</td>');
		}
		echo('</tr>');




	}
?>